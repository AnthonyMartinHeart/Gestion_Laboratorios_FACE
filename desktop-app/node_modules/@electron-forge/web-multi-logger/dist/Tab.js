"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Log_1 = __importDefault(require("./Log"));
let idCounter = 1;
class Tab {
    constructor(name, ws) {
        this.name = name;
        this.ws = ws;
        this.logs = [];
        this.id = idCounter;
        idCounter += 1;
    }
    /**
     * Log a line to the web UI, a new line is automatically appended to the line
     */
    log(line) {
        const log = new Log_1.default(line, new Date());
        this.logs.push(log);
        for (const client of this.ws.getWss().clients) {
            client.send(JSON.stringify({
                tab: this.id,
                payload: log,
            }));
        }
    }
    toJSON() {
        return {
            id: this.id,
            name: this.name,
            logs: this.logs,
        };
    }
}
exports.default = Tab;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFiLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1RhYi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLGdEQUF3QjtBQUV4QixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7QUFFbEIsTUFBcUIsR0FBRztJQUt0QixZQUNTLElBQVksRUFDWCxFQUFnQjtRQURqQixTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1gsT0FBRSxHQUFGLEVBQUUsQ0FBYztRQU5sQixTQUFJLEdBQVUsRUFBRSxDQUFDO1FBUXZCLElBQUksQ0FBQyxFQUFFLEdBQUcsU0FBUyxDQUFDO1FBQ3BCLFNBQVMsSUFBSSxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsR0FBRyxDQUFDLElBQVk7UUFDZCxNQUFNLEdBQUcsR0FBRyxJQUFJLGFBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXBCLEtBQUssTUFBTSxNQUFNLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM5QyxNQUFNLENBQUMsSUFBSSxDQUNULElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFO2dCQUNaLE9BQU8sRUFBRSxHQUFHO2FBQ2IsQ0FBQyxDQUNILENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQztJQUVPLE1BQU07UUFDWixPQUFPO1lBQ0wsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ1gsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1NBQ2hCLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFyQ0Qsc0JBcUNDIn0=